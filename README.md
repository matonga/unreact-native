# unreact-native
[React Native](https://reactnative.dev/) minus the React part

## Usage

Import the library:

```tsx
import { Unreact, UnreactApp } from './Unreact';
```

Make "unreact" components from React Native ones:

```tsx
import ReactNative from 'react-native';
const View = Unreact ('View', (props, children) => <ReactNative.View {...props}>{children}</ReactNative.View>, [ 'style' ]);
const Text = Unreact ('Text', (props, children) => <ReactNative.Text {...props}>{children}</ReactNative.Text>, [ 'style' ]);
const Pressable = Unreact ('Pressable', (props, children) => <ReactNative.Pressable {...props}>{children}</ReactNative.Pressable>, [ 'style', 'onPress' ]);
// etc...
```

The last parameter is a list of "props" to expose. Maybe the list could be autogenerated from the corresponding .d.ts files.

Designate a main node and add all children there, for example:

```tsx
const app = new View ();
const button = new Pressable ();
const buttonText = new Text ();
buttonText.appendChild ('Test button');
button.appendChild (buttonText);
app.appendChild (button);
button.onPress = () => {
  let time = new Text ();
  time.appendChild (new Date ().toString ());
  app.appendChild (time);
};
```

You don't need to add all children at initialization, you can add them later, as demonstrated by button.onPress.

Last declare your app as usual, and use UnreactApp like this:

```tsx
function App () {
  return UnreactApp (app);
}

export default App;
```

That's everything you need. You can use any React Native component as long as you pass it through Unreact.

## API

### Unreact (name, render, propNames)

Returns a new constructor to adapt a React Native component.

Parameter | Type | Description
--- | --- | ---
name | string | Descriptive name
render | (props : any[], children : React.JSX.Element[]) => React.JSX.Element | Must return the React Native component
propNames | string[] | a list of props to expose

### Constructor returned by Unreact

The returned constructor can be called with an initial set of props, for example:

```tsx
view = new View ({ style: { backgroundColor: 'silver' } });
```

Objects returned by the constructor will have getter and setter for each prop in propNames, in addition to these methods:

Method | Parameters | Description
--- | --- | ---
appendChild | child | -
removeChild | child | -
insertBefore | newChild, referenceChild | -
replaceChildren | child1, child2, ... | -

The style prop will be handled specially, by means of a Proxy instance. Styles are immutable, but the Proxy instance allows code such as:

```tsx
button.style.backgroundColor = 'silver';
```

Any other methods are considered reserved / undocumented and may change in a future release.

### UnreactApp

Receives an unreact element and returns a React Native component.

## Pending

* Make a tool to generate propNames list from .d.ts files / autgenerate .tsx files to import components.
* Test with Fabric.
* Test with Xcode (only tested with Android up to now).
* Test with [React Native for Web](https://necolas.github.io/react-native-web/).
* Write better documentation.

## Not pending

* HTML5 compatibility
* HTML5 DOM rendering
* ...anything related to HTML

This is not a WebView or HTML browser. If you need to write an HTML + CSS + JS app please use [CapacitorJS](https://capacitorjs.com/).

If you love React Native but hate React, then this library is for you.
